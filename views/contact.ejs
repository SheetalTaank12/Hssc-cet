<% layout("layouts/boilerplate") %>



<section id="contact-us">

  <a href="/notes" id="homelink"><i class='bx bx-left-arrow-alt'></i>Home</a>


  <h2 class="contact-heading show-heading">Contact Us</h2>
  
  <div class="contact-options">
    <div class="contact-opt">
      <div class="contact-icon"><i class='bx bx-envelope'></i></div>
      <p class="name">jatinsonihansi21@gmail.com</p>
    </div>

    <div class="contact-opt">
      <div class="contact-icon"><i class='bx bxl-instagram'></i></div>
      <a href="https://www.instagram.com/haryana_cet_notes.shop?igsh=bzlzM3Z4ODZzN3hr" style="color: #fff;"><p class="name">Contact On Instagram </p></a>
    </div>

    <div class="contact-opt">
      <div class="contact-icon"><i class='bx bx-message'></i></div>
      <a href="/notes/contact#form-group" style="color: #fff;"><p class="name">Send a message</p></a>
    </div>
  </div>

</section>



<section id="contact">
  <h2 class="contact-heading show-heading">Get in Touch </h2>

  <form class="contact-form" id="contact-form">
    <div class="form-group">
      <input type="text" name="name" placeholder="Your Name" required>
      <input type="email" name="email" placeholder="Your Email" required>
    </div>
    
    <div class="form-group">
      <input type="tel" name="phone" placeholder="Phone Number (Optional)">
      <input type="text" name="subject" placeholder="Subject">
    </div>
    
    <div class="form-group" id="form-group">
      <select name="inquiry-type" required>
        <option value="" disabled selected>Select Inquiry Type</option>
        <option value="group-d">Group D</option>
        <option value="group-c">Group C</option>
        <option value="hp">Haryana Police</option>
        <option value="notes-query">Notes-Query</option>
        <option value="payment-query">Payment Query</option>
        <option value="others">Others</option>
      </select>
    </div>

    <textarea name="message" placeholder="Your Message" rows="5" required></textarea>

    <button type="submit" class="contact-btn">Send Message</button>
  </form>
</section>



<script>

    document.addEventListener("DOMContentLoaded", () => {


const secObserver = new IntersectionObserver((entries,observer)=>{
    entries.forEach(entry=>{
        if(entry.isIntersecting){
            entry.target.classList.add('visible');

            // all headings inside it
      const headings = entry.target.querySelectorAll('.show-heading');
      headings.forEach(h => h.classList.add('show'));

        
        }
    });
}, {
  threshold: 0.05 
});
document.querySelectorAll('section').forEach(section=>{
    secObserver.observe(section);
});


});
</script>


<script>
  document.getElementById("contact-form").addEventListener("submit", async (e) => {
    e.preventDefault();

    const formData = new FormData(e.target);
    const data = Object.fromEntries(formData.entries());

    try {
      const response = await fetch("/send-message", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      const result = await response.json();
//       response.json() is a built-in function that:

// Reads the raw text (like '{"success":true}')

// Runs JSON.parse() on it

// Converts it into a JavaScript object



      if (result.success) {
        alert("✅ Message sent successfully!");
        e.target.reset(); // clear form
      } else {
        alert("❌ Failed to send message. Try again.");
      }
    } catch (err) {
      console.error(err);
      alert("⚠️ Something went wrong. Please try again.");
    }
  });
</script>
